
{% extends "base.html" %}

{% block title %}
{{post.username if post else "–ù–æ–≤—ã–π –ø–æ—Å—Ç"}}

{% endblock title %}


{% block content %}

{% if not post %}
<h1 class="text-2xl font-semibold mb-4">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ—Å—Ç</h1>
<form method="POST" action="{{ url_for('add_post') }}" enctype="multipart/form-data" class="flex flex-col gap-4 max-w-xl">
  <input type="text" name="title" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫" class="p-2 border rounded" required>
  <textarea name="content" placeholder="–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ" class="p-2 border rounded" required></textarea>
  <input type="file" name="file" accept="image/*">
  <button type="submit" class="px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
</form>

{% else %}
<div class="bg-white p-4 rounded shadow-md max-w-3xl">

  <div class="text-sm text-gray-500 mb-3">{{ post.username }} ‚Ä¢ {{ post.created_at }}</div>
  {% if image_path %}
  <img src="{{ url_for('serve_post_image', filename=image_path.name) }}" width="400" alt="–§–æ—Ç–æ –ø–æ—Å—Ç–∞">
  {% endif %}
  <h2 class="text-xl font-semibold mb-2">{{ post.title }}</h2>
  
  <p class="text-gray-700 mb-3">{{ post.content }}</p>
    <div>
          <form action="{{url_for('like_post', post_id=post.id)}}" method="post">
            <input type="hidden" name="is_liked" value="{{likes.is_liked}}">
            <button type="submit" class="rounded-full p-2 text-2xl hover:scale-125 transition-all duration-200 focus:outline-none">
            {% if likes.is_liked %} ‚ù§Ô∏è {% else %} ü§ç {% endif %}
            </button>
          </form>
          {% if likes.likes > 1 %} {{likes.likes}} –æ—Ç–º–µ—Ç–æ–∫ "–ù—Ä–∞–≤–∏—Ç—Å—è"
          {% elif likes.likes == 1 %} {{likes.likes}} –æ—Ç–º–µ—Ç–∫–∞ "–ù—Ä–∞–≤–∏—Ç—Å—è"
          {% endif %}
      </div>
  
  

  
</div>

<form action="{{url_for}}"></form>
{% endif %}
{% endblock content %}
